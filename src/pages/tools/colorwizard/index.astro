---
import BaseLayout from '../../../layouts/BaseLayout.astro';
/**
 * ColorWizard Refactor: First Move
 * Establishing the "Instrument" UI and the core Spectral Mixing Engine structure.
 * This page replaces the static Markdown-driven tool page with a real-time reactive display.
 */
---

<BaseLayout title="ColorWizard" description="Spectral Color Mixing Engine">
	<div class="max-w-5xl mx-auto px-6 py-20">
		<!-- The Header: Terminal-inspired metadata -->
		<header class="mb-12 border-b-2 border-charcoal pb-8">
			<div class="flex items-center gap-4 mb-4">
				<span class="section-label !mb-0">Instrument_ID: CW-01</span>
				<div class="h-[1px] flex-1 bg-charcoal/20"></div>
				<p class="text-xs font-mono text-charcoal/50 uppercase tracking-widest">Spectral_Engine_v1.0.0</p>
			</div>
			<h1 class="text-display md:text-display-lg leading-tight tracking-tighter mb-4 uppercase">
				ColorWizard
			</h1>
			<p class="text-xl font-mono text-charcoal/70 lowercase tracking-tight">
				Subtractive mixing via Kubelka-Munk reflectance model.
			</p>
		</header>

		<!-- The Interface: Structural Grid -->
		<div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
			
			<!-- Left Column: Spectral Readout -->
			<div class="md:col-span-7 section-block !p-0 overflow-hidden">
				<div class="bg-charcoal text-manual px-4 py-2 border-b-2 border-charcoal flex justify-between items-center">
					<span class="font-mono text-[10px] font-bold uppercase tracking-widest">Spectral_Distribution</span>
					<span class="font-mono text-[10px] uppercase">380nm - 730nm</span>
				</div>
				<div class="aspect-[16/9] bg-black relative overflow-hidden" id="spectral-canvas-container">
					<!-- Real-time curve will be rendered here via Canvas/GPU -->
					<div class="absolute inset-0 grid grid-cols-10 opacity-10 pointer-events-none">
						{[...Array(10)].map((_, i) => <div class="border-r border-white/20 h-full"></div>)}
					</div>
					<div class="absolute inset-0 flex items-center justify-center">
						<p class="font-mono text-[10px] text-white/30 uppercase tracking-[0.3em] animate-pulse">Initializing_Spectral_Core...</p>
					</div>
				</div>
				<div class="p-6 border-t-2 border-charcoal bg-black">
					<div class="grid grid-cols-2 gap-8 font-mono text-[11px] uppercase text-white/50">
						<div>
							<span class="block text-white mb-2">Dominant_Wavelength</span>
							<span class="text-xl text-white font-bold" id="readout-wavelength">--- nm</span>
						</div>
						<div>
							<span class="block text-white mb-2">Reflectance_Peak</span>
							<span class="text-xl text-white font-bold" id="readout-peak">--- %</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Right Column: Control Panel -->
			<div class="md:col-span-5 space-y-6">
				
				<!-- Pigment Selection -->
				<div class="section-block">
					<p class="section-label">Pigment_Inventory</p>
					<div class="space-y-4">
						<div class="flex flex-col gap-2">
							<label class="font-mono text-[10px] uppercase text-white/40">Pigment_A (Base)</label>
							<select class="bg-black border-2 border-charcoal text-white font-mono text-xs p-3 focus:bg-charcoal focus:text-black outline-none transition-colors">
								<option value="cadmium-yellow">Cadmium Yellow (Light)</option>
								<option value="ultramarine-blue">Ultramarine Blue (Deep)</option>
								<option value="titanium-white">Titanium White</option>
								<option value="alizarin-crimson">Alizarin Crimson</option>
							</select>
						</div>
						<div class="flex flex-col gap-2">
							<label class="font-mono text-[10px] uppercase text-white/40">Pigment_B (Additve)</label>
							<select class="bg-black border-2 border-charcoal text-white font-mono text-xs p-3 focus:bg-charcoal focus:text-black outline-none transition-colors">
								<option value="ultramarine-blue" selected>Ultramarine Blue (Deep)</option>
								<option value="cadmium-yellow">Cadmium Yellow (Light)</option>
								<option value="titanium-white">Titanium White</option>
								<option value="alizarin-crimson">Alizarin Crimson</option>
							</select>
						</div>
					</div>
				</div>

				<!-- Mixing Ratio -->
				<div class="section-block">
					<p class="section-label">Mixing_Ratio</p>
					<div class="space-y-6">
						<div class="relative pt-2">
							<input type="range" min="0" max="100" value="50" class="w-full h-1 bg-charcoal/20 appearance-none cursor-pointer accent-white" id="mix-ratio" />
							<div class="flex justify-between font-mono text-[9px] mt-3 text-white/40 uppercase">
								<span>100:0</span>
								<span>50:50</span>
								<span>0:100</span>
							</div>
						</div>
						<button class="btn-instrument w-full text-center py-4 text-xs">
							Generate_Spectral_Display
						</button>
					</div>
				</div>

				<!-- Local Storage Actions -->
				<div class="grid grid-cols-2 gap-4">
					<button class="border-2 border-charcoal/30 p-3 font-mono text-[10px] uppercase text-white/50 hover:bg-charcoal hover:text-black transition-colors">
						Export_JSON
					</button>
					<button class="border-2 border-charcoal/30 p-3 font-mono text-[10px] uppercase text-white/50 hover:bg-charcoal hover:text-black transition-colors">
						Commit_Disk
					</button>
				</div>

			</div>
		</div>

		<!-- Footer: Diagnostic data -->
		<footer class="mt-20 opacity-20 border-t border-charcoal pt-8">
			<div class="flex items-center gap-4">
				<div class="h-[2px] w-8 bg-charcoal"></div>
				<span class="font-mono text-[10px] tracking-[0.3em] uppercase">Spectral_Core_Idle // System_Ready</span>
				<div class="h-[2px] flex-1 bg-charcoal"></div>
			</div>
		</footer>
	</div>
</BaseLayout>

<style is:global>
	/* Range input reset for high-precision look */
	input[type='range']::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 12px;
		height: 24px;
		background: #ffffff;
		border: 1px solid #000;
		cursor: pointer;
	}
	
	/* Selection colors */
	::selection {
		background: #ffffff;
		color: #000000;
	}
</style>
