---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const tools = await getCollection('tools');
tools.sort((a, b) => {
	const statusOrder = { active: 0, beta: 1, archived: 2 };
	return statusOrder[a.data.status] - statusOrder[b.data.status];
});
---

<BaseLayout title="Tools" description="A collection of offline-first tools.">
	<div class="max-w-4xl mx-auto px-6 py-12">
		<h1 class="text-3xl font-bold mb-8">Tools</h1>
		
		<div class="space-y-6">
			{tools.map((tool) => (
				<a
					href={`/tools/${tool.slug}`}
					class="block border border-black p-6 hover:bg-gray-50 transition-colors"
				>
					<div class="flex items-start justify-between gap-4">
						<div class="flex-1">
							<h2 class="text-xl font-semibold mb-2">{tool.data.name}</h2>
							<p class="text-gray-700 mb-3">{tool.data.oneLiner}</p>
							<div class="flex items-center gap-3 text-sm">
								<span
									class="px-2 py-1 border border-black text-xs"
									class:list={{
										'bg-black text-white': tool.data.status === 'active',
										'bg-gray-100': tool.data.status === 'beta',
										'bg-gray-200': tool.data.status === 'archived',
									}}
								>
									{tool.data.status}
								</span>
								<span class="text-gray-600">{tool.data.platform}</span>
							</div>
						</div>
						<span class="text-gray-400">â†’</span>
					</div>
				</a>
			))}
		</div>
	</div>
</BaseLayout>
