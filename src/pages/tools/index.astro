---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const tools = await getCollection('tools');
tools.sort((a, b) => {
	const statusOrder = { active: 0, beta: 1, archived: 2 };
	return statusOrder[a.data.status] - statusOrder[b.data.status];
});
---

<BaseLayout title="Tools" description="Offline-first tools you actually own.">
	<section class="max-w-5xl mx-auto px-6 py-12 md:py-22">

		<div class="mb-10">
			<h1>Tools</h1>
		</div>

		<div class="grid gap-6 md:grid-cols-2">
			{tools.map((tool) => (
				<a
					href={`/tools/${tool.slug}`}
					class="block tool-card group"
				>
					{tool.data.heroImage ? (
						<img
							src={tool.data.heroImage}
							alt={`${tool.data.name} nameplate`}
							loading="lazy"
							decoding="async"
							class="w-full h-auto block"
						/>
					) : (
						<div class="p-6 md:p-8">
							<div class="flex items-center gap-3 mb-4">
								<span class:list={[
									'status-badge',
									{
										'status-badge--active': tool.data.status === 'active',
										'status-badge--beta': tool.data.status === 'beta',
										'status-badge--archived': tool.data.status === 'archived',
									},
								]}>
									{tool.data.status}
								</span>
								<span class="font-mono text-meta uppercase text-charcoal/40">
									{tool.data.platform}
								</span>
							</div>
							<h3 class="mb-3 group-hover:text-raw transition-colors">{tool.data.name}</h3>
							<p class="text-charcoal/65 leading-relaxed">{tool.data.oneLiner}</p>
						</div>
					)}
				</a>
			))}
		</div>
	</section>
</BaseLayout>
