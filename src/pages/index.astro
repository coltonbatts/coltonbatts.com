---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import Lottie from '../components/interactive/Lottie.astro';

const tools = await getCollection('tools');
const featuredTools = tools.slice(0, 2);
---

<BaseLayout title="Home" description="Toolmaker. Building offline-first tools.">
	<div class="max-w-4xl mx-auto px-6 py-12">
		<section class="mb-16">
			<h1 class="text-3xl font-bold mb-6">Toolmaker</h1>
			<div class="prose prose-lg max-w-none">
				<p class="text-lg leading-relaxed">
					I build tools that work offline, respect your privacy, and don't require subscriptions. 
					No logins, no ads, no tracking. Just software that solves problems. 
					Think workshop manual, not SaaS landing page.
				</p>
			</div>
		</section>

		<section class="mb-16">
			<h2 class="text-2xl font-semibold mb-6">Featured Tools</h2>
			<div class="grid gap-6 md:grid-cols-2">
				{featuredTools.map((tool) => (
					<a
						href={`/tools/${tool.slug}`}
						class="border border-black p-6 hover:bg-gray-50 transition-colors block"
					>
						<h3 class="text-xl font-semibold mb-2">{tool.data.name}</h3>
						<p class="text-gray-700 mb-4">{tool.data.oneLiner}</p>
						<div class="flex items-center gap-2">
							<span
								class="text-xs px-2 py-1 border border-black"
								class:list={{
									'bg-black text-white': tool.data.status === 'active',
									'bg-gray-100': tool.data.status === 'beta',
									'bg-gray-200': tool.data.status === 'archived',
								}}
							>
								{tool.data.status}
							</span>
							<span class="text-xs text-gray-600">{tool.data.platform}</span>
						</div>
					</a>
				))}
			</div>
		</section>

		<section class="mb-16 border-t border-black pt-12">
			<div class="grid gap-10 md:grid-cols-[minmax(0,1fr)_240px] items-center">
				<div>
					<h2 class="text-2xl font-semibold mb-4" data-reveal>
						Motion, used with restraint
					</h2>
					<p class="text-gray-700 leading-relaxed" data-reveal>
						Subtle animation helps draw attention without turning the page into a distraction.
						Each piece fades in as you scroll, and the Lottie sample pauses when it leaves view.
					</p>
					<div class="grid gap-4 mt-6 sm:grid-cols-2">
						<div class="border border-black p-4" data-reveal>
							<p class="font-semibold mb-2">Reduced motion safe</p>
							<p class="text-sm text-gray-600">
								Animations stop and content appears instantly when motion is reduced.
							</p>
						</div>
						<div class="border border-black p-4" data-reveal>
							<p class="font-semibold mb-2">Visible-only playback</p>
							<p class="text-sm text-gray-600">
								Lottie renders only on screen and pauses when you scroll away.
							</p>
						</div>
					</div>
				</div>
				<div class="border border-black bg-gray-50 p-6 flex items-center justify-center" data-reveal>
					<Lottie
						src="/lottie/example.json"
						class="w-32 h-32 md:w-40 md:h-40"
						ariaLabel="Pulsing circle animation"
					/>
				</div>
			</div>
		</section>

		<section>
			<a
				href="/portfolio"
				class="text-lg underline hover:no-underline"
			>
				View portfolio â†’
			</a>
		</section>
	</div>
</BaseLayout>
