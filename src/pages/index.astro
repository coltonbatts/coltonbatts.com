---
import BaseLayout from '../layouts/BaseLayout.astro';
import ArtSlot from '../components/ArtSlot.astro';
import { artManifest } from '../content/art-manifest';
import { getCollection } from 'astro:content';

const tools = await getCollection('tools');
const featuredTools = tools.slice(0, 2);
const isGalleryMode = artManifest.mode === 'gallery';

function resolveToolSlot(slot: (typeof artManifest.tools)[string] | undefined) {
	if (!slot) return undefined;
	if (isGalleryMode) return slot;
	return { ...slot, enabled: slot.enabled === true };
}
---

<BaseLayout title="Home" description="Toolmaker. Building offline-first tools.">
	<div class="max-w-4xl mx-auto px-6 py-20">
		<section class="mb-12 bg-paper p-8 border border-gray-200/60 shadow-[2px_2px_0_rgba(0,0,0,0.02)]">
			<h2 class="text-3xl font-bold mb-4 tracking-tighter">Production-first multimedia designer</h2>
			
			<div class="prose max-w-2xl text-charcoal/90">
				<p class="text-lg leading-snug font-medium mb-6">
					10+ years delivering high-volume content for Google, Under Armour, Kate Spade. 
					Focus on Premiere Pro, After Effects, and technical design hygiene.
				</p>
				
				<div class="flex flex-wrap gap-4 items-center">
					<a 
						href="/resume/Colton_Batts_Resume.pdf" 
						class="border border-charcoal px-4 py-2 text-sm font-bold hover:bg-charcoal hover:text-white transition-colors"
					>
						Resume
					</a>
					<a 
						href="mailto:colton.batts@gmail.com" 
						class="border border-charcoal px-4 py-2 text-sm font-bold hover:bg-charcoal hover:text-white transition-colors"
					>
						Email
					</a>
					
					<span class="text-[11px] font-bold uppercase tracking-[0.2em] text-charcoal/40 ml-2">
						Google · Under Armour · Kate Spade · Nuuly
					</span>
				</div>
			</div>
		</section>

		<section class="mb-16">
			<h1 class="text-3xl font-bold mb-6">Toolmaker</h1>
			<div class="prose prose-lg max-w-none">
				<p class="text-lg leading-relaxed">
					I build tools that work offline, respect your privacy, and don't require subscriptions.
					No logins, no ads, no tracking. Just software that solves problems.
					Think workshop manual, not SaaS landing page.
				</p>
			</div>
			<div class="mt-8">
				<ArtSlot slot={artManifest.hero} />
			</div>
		</section>

		<section class="mb-16">
			<h2 class="text-2xl font-semibold mb-6">Featured Tools</h2>
			<div class="grid gap-6 md:grid-cols-2">
				{featuredTools.map((tool) => (
					<a
						href={`/tools/${tool.slug}`}
						class="p-8 hover:bg-paper transition-all block tool-card group"
					>
						<ArtSlot
							slot={resolveToolSlot(artManifest.tools[tool.slug])}
							class="mb-6"
						/>
						<h3 class="text-2xl font-semibold mb-3 group-hover:text-black transition-colors">{tool.data.name}</h3>
						<p class="text-charcoal/70 mb-6 leading-relaxed">{tool.data.oneLiner}</p>
						<div class="flex items-center gap-3">
							<span
								class="text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 rounded-full"
								class:list={{
									'bg-charcoal text-white': tool.data.status === 'active',
									'bg-gray-100 text-charcoal/60': tool.data.status === 'beta',
									'bg-gray-200 text-charcoal/40': tool.data.status === 'archived',
								}}
							>
								{tool.data.status}
							</span>
							<span class="text-xs font-medium text-charcoal/40">{tool.data.platform}</span>
						</div>
					</a>
				))}
			</div>
		</section>

		<section class="mb-16">
			<h2 class="text-2xl font-semibold mb-6">Motion</h2>
			<ArtSlot slot={artManifest.motion} />
		</section>

		<section>
			<a
				href="/portfolio"
				class="text-lg underline hover:no-underline"
			>
				View portfolio →
			</a>
		</section>
	</div>
</BaseLayout>
