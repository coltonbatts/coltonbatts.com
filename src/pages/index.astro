---
/**
 * index.astro â€” Homepage
 */

import BaseLayout from '../layouts/BaseLayout.astro';
import ArtSlot from '../components/ArtSlot.astro';
import CyberHero from '../components/CyberHero.astro';
import PaintingCard from '../components/PaintingCard.astro';
import { artManifest } from '../content/art-manifest';
import { getCollection } from 'astro:content';

const paintings = await getCollection('paintings');
const clientVideos = paintings
	.filter(p => p.data.vimeoId)
	.sort((a, b) => a.data.order - b.data.order);

const tools = await getCollection('tools');
const featuredTools = tools.slice(0, 2);
const isGalleryMode = artManifest.mode === 'gallery';

function resolveToolSlot(slot: (typeof artManifest.tools)[string] | undefined) {
	if (!slot) return undefined;
	if (isGalleryMode) return slot;
	return { ...slot, enabled: slot.enabled === true };
}

const trustedByLogos = [
	{ key: 'nuuly', name: 'Nuuly', src: '/brands/nuuly.png' },
	{ key: 'kate-spade', name: 'Kate Spade', src: '/brands/kate-spade.png' },
	{ key: 'under-armour', name: 'Under Armour', src: '/brands/under-armour.png' },
	{ key: 'google-shopping', name: 'Google Shopping', src: '/brands/google-shopping.png' }
];
---

<BaseLayout title="Home" description="Toolmaker. Building offline-first tools.">

	<!-- Font preloader: prevents flicker during hero animation -->
	<div class="sr-only" aria-hidden="true" style="opacity: 0; pointer-events: none; position: absolute;">
		<span style="font-family: 'Geist Pixel';">Square</span>
		<span style="font-family: 'Geist Pixel Circle';">Circle</span>
		<span style="font-family: 'Geist Pixel Triangle';">Triangle</span>
		<span style="font-family: 'Geist Pixel Grid';">Grid</span>
		<span style="font-family: 'Geist Pixel Line';">Line</span>
	</div>

	<section class="hero-section" data-motion-chapter>
		<div class="max-w-5xl mx-auto px-6 pt-16 pb-12 md:pt-22 md:pb-16">

			<div class="flex justify-end mb-6">
				<p class="section-label section-label--right">Colton Batts &mdash; Fort Worth, TX</p>
			</div>

			<div class="relative max-w-4xl mx-auto py-12 md:py-20 mb-12">
				<div class="text-center overflow-visible">
					<h1 class="text-display md:text-display-lg leading-tight tracking-tighter mb-4">
						Production-first designer.<br class="hidden md:block" />
						<div class="toolmaker-specimen mt-4 md:mt-2">
							<span class="toolmaker-specimen__main">Toolmaker.</span>
						</div>
					</h1>
				</div>
			</div>

			<p class="text-lg md:text-xl leading-relaxed max-w-2xl text-charcoal mb-10 mx-auto text-center pt-8">
				10+ years delivering high-volume content for global brands.
				Now building offline-first software that you actually own.
			</p>

			<div class="flex flex-wrap gap-4 items-center justify-center mb-12">
				<a href="/resume/Colton_Batts_Resume.pdf" class="btn-instrument">
					Resume
				</a>
				<a href="mailto:colton.batts@gmail.com" class="btn-instrument--raw btn-instrument">
					Email
				</a>
			</div>

			<div class="trusted-by-strip" aria-label="Select clients">
				<p class="section-label mb-4 border-0 pb-0 text-charcoal">Select Clients</p>
				<div class="grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-5 md:gap-y-0 items-center">
					{trustedByLogos.map((logo) => (
						<div class="trusted-logo-wrap">
							<img
								src={logo.src}
								alt={logo.name}
								loading="lazy"
								decoding="async"
								class={`trusted-logo-image trusted-logo-image--${logo.key}`}
							/>
						</div>
					))}
				</div>
			</div>
		</div>
	</section>

	<section class="max-w-5xl mx-auto px-6 py-16 md:py-22" data-motion-chapter>
		<div class="flex flex-col md:flex-row md:items-end justify-between mb-10">
			<div class="flex-1">
				<p class="section-label section-label--right mb-0 border-0 pb-0">Client Work</p>
				<h2 class="mt-3">Recent Projects</h2>
			</div>
			<a href="/portfolio" class="hidden md:block font-mono text-label uppercase tracking-instrument text-raw hover:text-raw-dark transition-colors">
				All Projects &rarr;
			</a>
		</div>

		<div class="grid gap-8">
			{clientVideos.map((project) => (
				<PaintingCard
					title={project.data.title}
					medium={project.data.medium}
					dimensions={project.data.dimensions}
					year={project.data.year}
					image={project.data.image}
					slug={project.slug}
					featured={project.data.featured}
					available={project.data.available}
					series={project.data.series}
					vimeoId={project.data.vimeoId}
				/>
			))}
		</div>

		<div class="mt-8 md:hidden">
			<a href="/portfolio" class="btn-instrument w-full text-center">
				All Projects &rarr;
			</a>
		</div>
	</section>

	<section class="" data-motion-chapter>
		<div class="max-w-5xl mx-auto">
			<ArtSlot slot={artManifest.hero} />
		</div>
	</section>

	<section class="bg-manual text-charcoal" data-motion-chapter>
		<div class="max-w-5xl mx-auto px-6 py-16 md:py-22">
			<div class="grid md:grid-cols-12 gap-8 md:gap-12">

				<div class="md:col-span-5 md:text-right">
					<p class="font-mono text-label uppercase tracking-instrument text-charcoal mb-4">
						Philosophy
					</p>
					<h2 class="text-display-sm text-charcoal">Own-Forever<br />Software.</h2>
				</div>

				<div class="md:col-span-7 md:pt-2">
					<p class="text-lg md:text-xl leading-relaxed text-charcoal mb-6">
						Tools that work offline, respect your privacy, and don't require subscriptions.
						No logins, no ads, no tracking.
					</p>
					<p class="text-base leading-relaxed text-charcoal mb-8">
						Everything is designed to be owned, not rented. Your data stays on your machine.
						The code is readable. If the internet goes down, the tool still works.
					</p>
					<div class="pt-6">
						<a href="/tools" class="btn-instrument border-charcoal/40 text-charcoal hover:bg-charcoal hover:text-manual">
							View Tools
						</a>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="max-w-5xl mx-auto px-6 py-16 md:py-22" data-motion-chapter>

		<div class="flex flex-col md:flex-row md:items-end justify-between mb-10">
			<div class="flex-1">
				<p class="section-label section-label--right mb-0 border-0 pb-0">Software</p>
				<h2 class="mt-3">Tools</h2>
			</div>
			<a href="/tools" class="hidden md:block font-mono text-label uppercase tracking-instrument text-raw hover:text-raw-dark transition-colors">
				All Tools &rarr;
			</a>
		</div>

		<div class="grid gap-6 md:grid-cols-2">
			{featuredTools.map((tool) => (
				<a
					href={`/tools/${tool.slug}`}
					class="block tool-card group"
				>
					{tool.data.heroImage ? (
						<img
							src={tool.data.heroImage}
							alt={tool.data.name}
							loading="lazy"
							decoding="async"
							class="w-full h-auto block"
						/>
					) : (
						<ArtSlot
							slot={resolveToolSlot(artManifest.tools[tool.slug])}
						/>
					)}
				</a>
			))}
		</div>

		<div class="mt-8 md:hidden">
			<a href="/tools" class="btn-instrument w-full text-center">
				All Tools &rarr;
			</a>
		</div>
	</section>

	<section id="home-motion-moment" class="" data-motion-chapter>
		<div class="max-w-5xl mx-auto px-6 py-10">
			<div class="flex flex-col md:flex-row md:items-end justify-between mb-6">
				<div class="flex-1">
					<p class="section-label section-label--right mb-0 border-0 pb-0">Interactive</p>
					<h2 class="mt-3">Motion</h2>
				</div>
				<a href="/lab" class="hidden md:block font-mono text-label uppercase tracking-instrument text-raw hover:text-raw-dark transition-colors">
					Lab &rarr;
				</a>
			</div>
			<CyberHero />
		</div>
	</section>

	<section class="max-w-5xl mx-auto px-6 py-16 md:py-22" data-motion-chapter>
		<div class="grid md:grid-cols-12 gap-8 md:gap-12">

			<div class="md:col-span-5 md:text-right">
				<p class="section-label section-label--right">Production</p>
				<h2 class="mb-6">Editorial &<br />Motion Design</h2>
				<p class="text-charcoal leading-relaxed mb-8">
					Before building software, I spent a decade in high-volume video production
					and editorial design for national brands. That production discipline
					informs everything I build.
				</p>
				<div class="flex flex-wrap gap-4 justify-end">
					<a href="/resume" class="btn-instrument">
						Full Resume
					</a>
					<a href="/portfolio" class="btn-instrument--raw btn-instrument">
						Portfolio
					</a>
				</div>
			</div>

			<div class="md:col-span-7 grid gap-4">
				<div class="section-block section-block--static">
					<p class="section-label">Capture This &middot; 2021&ndash;Present</p>
					<h4 class="font-sans font-bold mb-2">Lead Video Editor</h4>
					<p class="text-sm text-charcoal leading-relaxed">
						30+ assets for Google &ldquo;Shop With Google&rdquo; campaigns. Under Armour
						training series. Kate Spade social. 24-hour rough-cut turnarounds.
					</p>
				</div>
				<div class="section-block section-block--static">
					<p class="section-label">Freedom Powersports &middot; 2015&ndash;2021</p>
					<h4 class="font-sans font-bold mb-2">Multimedia Designer & Video Lead</h4>
					<p class="text-sm text-charcoal leading-relaxed">
						Large-format signage, building wraps, event systems.
						6 years as primary editor for corporate and promotional media.
					</p>
				</div>
			</div>
		</div>
	</section>

	<section class="bg-manual text-charcoal" data-motion-chapter>
		<div class="max-w-5xl mx-auto px-6 py-16 md:py-22 flex flex-col md:flex-row md:items-center md:justify-between gap-8">
			<div>
				<p class="font-mono text-label uppercase tracking-instrument text-charcoal mb-3">
					Get in touch
				</p>
				<h2 class="text-display-sm text-charcoal">Let's build something.</h2>
			</div>
			<div class="flex flex-wrap gap-4">
				<a href="mailto:colton.batts@gmail.com" class="btn-instrument border-charcoal text-charcoal hover:bg-charcoal hover:text-manual">
					Email
				</a>
				<a href="/contact" class="btn-instrument border-raw text-raw hover:bg-raw hover:text-manual">
					Contact
				</a>
			</div>
		</div>
	</section>

</BaseLayout>
